import { MultiSelect } from './MultiSelect';
import { Preview, Story, Meta, Props } from '@storybook/addon-docs/blocks';
import { StarIcon } from '@medly-components/icons';
import { boolean, select, text } from '@storybook/addon-knobs';
import { useState } from 'react';
import { variants, sizes, options, optionsWithCustomComponent, disabledOptions, ThemeInterface } from './MultiSelect.stories';

<Meta title="Core/MultiSelect" component={MultiSelect} />

# MultiSelect

The `MultiSelect` component allows you to select multiple items from a drop-down list.

## 1. Basic MultiSelect component

<Preview withToolbar>
    <Story name="Default">
        {() => {
            const [values, setValues] = useState(['lorem pharmacy', 'a pharmacy']);
            return (
                <MultiSelect
                    options={options}
                    values={values}
                    onChange={setValues}
                    size={select('Size', sizes, 'M')}
                    disabled={boolean('Disabled', false)}
                    fullWidth={boolean('Full Width', false)}
                    required={boolean('Required', false)}
                    label={text('Label', 'Pharmacy')}
                    placeholder="Search Pharmacy"
                    minWidth={text('Min Width', '20rem')}
                    isSearchable={boolean('Is Searchable', true)}
                    helperText={text('Helper Text', 'We will show reports based on Pharmacy')}
                    errorText={text('Error Text', '')}
                    variant={select('Variant', variants, 'filled')}
                />
            );
        }}
    </Story>
</Preview>

## 2. MultiSelect component with a few disabled options

<Preview withToolbar>
    <Story name="WithDisabledOptions">
        {() => {
            const [values, setValues] = useState(['disabled pharmacy', 'a pharmacy']);
            return (
                <MultiSelect
                    options={disabledOptions}
                    values={values}
                    onChange={setValues}
                    size={select('Size', sizes, 'M')}
                    disabled={boolean('Disabled', false)}
                    fullWidth={boolean('Full Width', false)}
                    required={boolean('Required', false)}
                    label={text('Label', 'Pharmacy')}
                    placeholder="Search Pharmacy"
                    isSearchable={boolean('Is Searchable', true)}
                    helperText={text('Helper Text', 'We will show reports based on Pharmacy')}
                    errorText={text('Error Text', '')}
                    variant={select('Variant', variants, 'filled')}
                />
            );
        }}
    </Story>
</Preview>

## 3. MultiSelect component with icon prefix

<Preview withToolbar>
    <Story name="WithIconPrefix">
        {() => {
            const [values, setValues] = useState(['lorem pharmacy', 'a pharmacy']);
            return (
                <MultiSelect
                    options={options}
                    values={values}
                    onChange={setValues}
                    size={select('Size', sizes, 'M')}
                    disabled={boolean('Disabled', false)}
                    fullWidth={boolean('Full Width', false)}
                    required={boolean('Required', false)}
                    label={text('Label', 'Pharmacy')}
                    placeholder="Search Pharmacy"
                    minWidth={text('Min Width', '20rem')}
                    isSearchable={boolean('Is Searchable', true)}
                    helperText={text('Helper Text', 'We will show reports based on Pharmacy')}
                    errorText={text('Error Text', '')}
                    variant={select('Variant', variants, 'filled')}
                    prefix={StarIcon}
                />
            );
        }}
    </Story>
</Preview>

## 4. MultiSelect component with creatable options

This feature allows you to create new options apart from the existing ones. The `isCreatable` flag must be set to true.

<Preview withToolbar>
    <Story name="WithCreatableOptions">
        {() => {
            const [values, setValues] = useState(['lorem pharmacy', 'a pharmacy']);
            return (
                <MultiSelect
                    options={options}
                    values={values}
                    onChange={setValues}
                    size={select('Size', sizes, 'M')}
                    disabled={boolean('Disabled', false)}
                    fullWidth={boolean('Full Width', false)}
                    required={boolean('Required', false)}
                    label={text('Label', 'Pharmacy')}
                    placeholder="Search Pharmacy"
                    minWidth={text('Min Width', '20rem')}
                    isSearchable={boolean('Is Searchable', true)}
                    helperText={text('Helper Text', 'We will show reports based on Pharmacy')}
                    errorText={text('Error Text', '')}
                    variant={select('Variant', variants, 'filled')}
                    isCreatable={boolean('Creatable', true)}
                />
            );
        }}
    </Story>
</Preview>

## 5. MultiSelect component with custom component options

This feature allows you to add custom component options. pass the array of `{label:'' , value:''}` in the options list like below. `componentContent` to make component searchable

```tsx
const options = [
    { value: 'Dummy1 option', label: 'Dummy1 option' },
    {
        label: 'Dummy2 option',
        value: 'Dummy2 option',
        component:<div><Text>Dummy option 2 Title</Text><Text>Dummy description</Text></div>,
        componentContent:['Dummy2 option','Dummy 2 Title','Dummy description]
    },
    {   value: 'Dummy3 option', label: 'Dummy3 option',
        component:<div><Text>Dummy option 3 Title</Text><Text>Dummy description</Text></div>,
        componentContent:['Dummy3 option','Dummy 3 Title','Dummy description]
    }
];
```

Pass `optionAutoWidth` to allows the max-content width for options modal.

<Preview withToolbar>
    <Story name="WithCustomComponentOptions">
        {() => {
            const [values, setValues] = useState(['lorem pharmacy', 'a pharmacy']);
            return (
                <MultiSelect
                    options={optionsWithCustomComponent}
                    values={values}
                    onChange={setValues}
                    size={select('Size', sizes, 'M')}
                    label={text('Label', 'Pharmacy')}
                    placeholder="Search Pharmacy"
                    isSearchable={boolean('Is Searchable', true)}
                    helperText={text('Helper Text', 'We will show reports based on Pharmacy')}
                    variant={select('Variant', variants, 'filled')}
                    optionAutoWidth
                />
            );
        }}
    </Story>
</Preview>

## Props

This component offers the following props mentioned in the table below:

<Props of={MultiSelect} />

### MultiSelectTheme

This theme is shared between single select and multi select.

<Props of={ThemeInterface} />
```
